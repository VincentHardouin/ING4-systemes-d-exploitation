#include <stdio.h>
#include <unistd.h>
#include <errno.h>
#include <sys/types.h>
#include <fcntl.h>
int main() {
    int i;
    char buf[100];
    // ouvrir un le stdin en lecture non bloquante
    fcntl(STDIN_FILENO, F_SETFL, O_NONBLOCK); 
    /* 
    Si le flag `O_NONBLOCK` n'est pas spécifié, l'entrée standard se bloque jusqu'à ce qu'on appuit sur la touche `entré`
    Si on active le flag `O_NONBLOCK`, l'entrée standard ne peut se bloquer et rend donc sa lecture impossible.
    */
    for (i = 0; i < 10; i++) {
        int nb;
        nb = read(STDIN_FILENO, buf, 100);
        printf("nwrites = %d\terror = %d\n", nb, errno);
    }
}
