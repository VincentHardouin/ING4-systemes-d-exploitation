# Rapport Lab 1

### Réalisé par : 
- Hugo Pauthier
- Vincent Hardouin


## 1 - Compiling under Linux 

Fait  : 
- Créer un fichier `hello.c`
- Copier le contenu : 
```c
#include <stdio.h>
int main() {
    printf("Hello World!");
}

```
- Lancer la commande pour compiler le programme : 
```shell
gcc -o myHelloProgram hello.c
```

- Lancer le programme : 
```shell
./myHelloProgram
```

3. Lancer la compilation avec cette commande : 
```shell
gcc -g -o myHelloProgram hello.c
```
L'option `-g` permet d'ajouter des informations de debuggage. 

4. 
```shell 
gdb myHelloProgram
```

Ayant un mac nous avons du lancer la commande en super user (`sudo`) pour des problèmes de signature du code. 

Ensuite, nous avons lancé le programme en debug et avons choisi de stopper le programme ligne 3 en ajoutant un point d'arrêt : `break 3`

Voici ce que nous avons obtenu : 

```shell
Reading symbols from /Users/vincenthardouin/dev/ing4/ING4-systemes-d-exploitation/week1/lab1/myHelloProgram.dSYM/Contents/Resources/DWARF/myHelloProgram...
(gdb) list
1       #include <stdio.h>
2       int main() {
3           printf("Hello World!");
4       }
(gdb) break 3
Breakpoint 1 at 0x100003f68: file hello.c, line 3.
(gdb) run arglist
Starting program: /Users/vincenthardouin/dev/ing4/ING4-systemes-d-exploitation/week1/lab1/myHelloProgram arglist
[New Thread 0x2203 of process 68717]
[New Thread 0x1f03 of process 68717]

Thread 2 hit Breakpoint 1, main () at hello.c:3
3           printf("Hello World!");
```

## 2 - Creating and Running a Process (1) - fork 

### Definition

Le fork créé un nouveau processus en dupliquant le processus appelé. Le nouveau processus a un nouveau PID et son PPID réfère à celui du processus appelé. Les deux processus évolue dans des espaces mémoire différent.

### 3 - Small program to show different message for each process

```shell
#include <stdio.h>
#include <unistd.h>

int main() {
    if (fork() == 0) {
        printf("Hey ! Je suis le processus fils. PID : %d \n", getpid());
    } else {
        printf("Hey ! Je suis le processus parent. PID : %d \n", getpid());
    }
}
```

Ce programme une fois compilé et lancé nous donne : 

```shell
ING4-systemes-d-exploitation/week1/lab1 on  main [!?] 
❯ ./part2fork                  
Hey ! Je suis le processus parent. PID : 69397 
Hey ! Je suis le processus fils. PID : 69398 
```

## 3 - Creating and Running a Process (2) - exec 



### Fork vs Exec

La fonction `fork` créé un processus copié du processus parent, mais à son propre code de retour. 
Tandis que, `exec` remplace le processus actuel par un nouveau programme. 